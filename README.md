# PayTrack
## О проекте
Этот бэкэнд-сервер предоставляет API для работы с пользователями, администраторами и платежами. Он поддерживает следующие эндпоинты:

- **/users** - Для пользователей:
  - Регистрация и получение данных (id, email, логин, полное имя)
  - Получение списка счетов (кошельков) и балансов
  - Получение списка платежей

- **/admins** - Для администраторов:
  - Авторизация по email
  - Получение данных о себе (id, email, логин, полное имя)
  - Создание/удаление/обновление пользователя или администратора
  - Получение списка пользователей и их счетов с балансами

- **/payments** - Для обработки платежей (пополнение баланса)


### Инструкция по общей подготовке к запуску бэкенд-сервера (обязательна):
  1.Клонируем репозиторий с сайта GitHub и заходим в директорию с проектом:
  ```
  git clone https://github.com/NoRIS95/PayTrack.git
  cd PayTrack

  ```
  2.Копируем шаблон .env .и вписываем необходимые данные:
  ```
  cp .env.template .env
  ```
  3.Вставляем необходимые данные в файл .env:
  ```
  POSTGRES_USER=<сюда вставить имя postgres пользователя>
  POSTGRES_PASSWORD=<сюда вставить пароль от postgres>
  POSTGRES_DB=<сюда вставить название базы данных>
  POSTGRES_HOST=<сюда вписать localhost или db в зависимости от того, как будет запускаться проект>
  POSTGRES_PORT=<сюда вписать порт, от которого будет запускаться проект>
  SECRET_KEY=<сюда вписать секретный ключ>
  ```

  ### Инструкция к запуску проекта без Docker Compose:
  1.Устанавливаем Poetry, если он не установлен:
  ```
  curl -sSL https://install.python-poetry.org | python3 -
  ```
  2.Устанавливаем зависимости проекта через Poetry:
  ```
  poetry install
  ```
  3.Обновляем миграции базы данных:
  ```
  alembic upgrade head
  ```
  4.Запускаем сервер:
  ```
  poetry run uvicorn app.main:app --reload
  ```
  
  ### Инструкция к запуску проекта с Docker Compose:
  1.Создаём контейнер в фоновом режиме
  ```
  sudo docker-compose up --build -d
  ```
  2.Создаём миграции в контейнере:
  ```
  sudo docker exec -it paytrack-app-1 python /app/migrates_for_docker.py
  ```